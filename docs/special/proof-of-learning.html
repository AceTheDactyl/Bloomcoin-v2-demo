<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proof of Learning - Consensus Alternative | BloomCoin Documentation</title>
    <link rel="stylesheet" href="../_shared/styles.css">
    <style>
        :root {
            --accent-color: #ffaa00;
            --accent-dim: rgba(255,170,0,0.2);
            --accent-glow: rgba(255,170,0,0.4);
        }

        .doc-header h1 {
            background: linear-gradient(90deg, #ffaa00, #ffcc44, #ffaa00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .doc-section h2 {
            color: var(--accent-color);
            border-bottom-color: var(--accent-dim);
        }

        .protocol-flow {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 12px;
            margin: 24px 0;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
        }

        .protocol-step {
            text-align: center;
            padding: 16px;
            background: linear-gradient(135deg, rgba(255,170,0,0.1), transparent);
            border: 1px solid var(--accent-dim);
            border-radius: 10px;
            min-width: 120px;
            flex: 1;
        }

        .protocol-step .number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent-color);
            font-family: monospace;
        }

        .protocol-step .label {
            font-size: 0.85rem;
            color: #aaa;
            margin-top: 8px;
        }

        .protocol-arrow {
            font-size: 1.5rem;
            color: var(--accent-dim);
        }

        @media (max-width: 768px) {
            .protocol-flow {
                flex-direction: column;
            }
            .protocol-arrow {
                transform: rotate(90deg);
            }
        }

        .formula-box {
            background: linear-gradient(135deg, rgba(255,170,0,0.1), rgba(255,215,0,0.05));
            border: 1px solid var(--accent-dim);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .formula-box h4 {
            color: var(--accent-color);
            margin-bottom: 12px;
            font-size: 1rem;
        }

        .formula-box .formula {
            font-family: 'Georgia', serif;
            font-size: 1.2rem;
            color: #e0e0e0;
            text-align: center;
            padding: 16px;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
        }

        .formula-box .formula span {
            color: var(--accent-color);
        }

        .stake-visual {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }

        .stake-card {
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .stake-card .value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--accent-color);
            font-family: monospace;
        }

        .stake-card .label {
            font-size: 0.85rem;
            color: #888;
            margin-top: 8px;
        }

        .stake-card .derivation {
            font-size: 0.75rem;
            color: #666;
            margin-top: 4px;
            font-family: monospace;
        }

        .evidence-box {
            background: linear-gradient(135deg, rgba(0,200,100,0.1), transparent);
            border: 1px solid rgba(0,200,100,0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
        }

        .evidence-box h4 {
            color: #00c864;
            margin-bottom: 12px;
        }

        .validator-box {
            background: linear-gradient(135deg, rgba(200,100,0,0.1), transparent);
            border: 1px solid rgba(200,100,0,0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
        }

        .validator-box h4 {
            color: #c86400;
            margin-bottom: 12px;
        }

        .consensus-box {
            background: linear-gradient(135deg, rgba(255,107,157,0.1), rgba(157,78,255,0.1));
            border: 1px solid rgba(255,107,157,0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .consensus-box h4 {
            color: #ff6b9d;
            margin-bottom: 12px;
        }

        .insight-callout {
            background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,170,0,0.05));
            border-left: 4px solid var(--accent-color);
            padding: 16px 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }

        .insight-callout strong {
            color: var(--accent-color);
        }

        .closure-list {
            list-style: none;
            margin: 16px 0;
            padding: 0;
        }

        .closure-list li {
            padding: 12px 16px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            margin-bottom: 8px;
            border-left: 3px solid var(--accent-color);
        }

        .closure-list li strong {
            color: var(--accent-color);
        }

        .comparison-table {
            margin: 24px 0;
        }

        .comparison-table th {
            background: linear-gradient(135deg, rgba(255,170,0,0.2), rgba(255,170,0,0.1));
        }

        .comparison-table td.highlight {
            color: #00ff88;
            font-weight: 600;
        }

        .comparison-table td.negative {
            color: #ff6666;
        }

        .file-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .file-card {
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 12px 16px;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .file-card a {
            color: var(--accent-color);
            text-decoration: none;
        }

        .file-card a:hover {
            text-decoration: underline;
        }

        .paradigm-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 24px 0;
        }

        @media (max-width: 768px) {
            .paradigm-comparison {
                grid-template-columns: 1fr;
            }
        }

        .paradigm-card {
            padding: 20px;
            border-radius: 12px;
        }

        .paradigm-card.old {
            background: linear-gradient(135deg, rgba(255,68,68,0.1), transparent);
            border: 1px solid rgba(255,68,68,0.3);
        }

        .paradigm-card.old h4 {
            color: #ff4444;
        }

        .paradigm-card.new {
            background: linear-gradient(135deg, rgba(0,255,136,0.1), transparent);
            border: 1px solid rgba(0,255,136,0.3);
        }

        .paradigm-card.new h4 {
            color: #00ff88;
        }

        .paradigm-card ul {
            margin: 12px 0 0 20px;
            color: #aaa;
        }

        .paradigm-card li {
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="doc-container">
        <header class="doc-header">
            <h1>Proof of Learning</h1>
            <p class="subtitle">Consensus Through Knowledge Acquisition</p>
            <nav class="breadcrumb">
                <a href="../../index.html">Home</a> / <a href="../index.html">Documentation</a> / <span>Proof of Learning</span>
            </nav>
        </header>

        <nav class="doc-nav">
            <a href="../../index.html" class="nav-link">Back to Dashboard</a>
            <a href="lia-system.html" class="nav-link">LIA Protocol</a>
        </nav>

        <!-- Mathematical Foundation -->
        <section class="doc-section">
            <h2>Mathematical Foundation</h2>
            <p>Proof of Learning (PoL) is a consensus mechanism that rewards knowledge acquisition instead of computational waste. It validates learning evidence through phi-weighted random validator selection and coherence-based rewards.</p>

            <div class="protocol-flow">
                <div class="protocol-step">
                    <div class="number">1</div>
                    <div class="label">Agent submits learning evidence</div>
                </div>
                <div class="protocol-arrow">-></div>
                <div class="protocol-step">
                    <div class="number">2</div>
                    <div class="label">phi-weighted validator selection</div>
                </div>
                <div class="protocol-arrow">-></div>
                <div class="protocol-step">
                    <div class="number">3</div>
                    <div class="label">Multi-validator verification</div>
                </div>
                <div class="protocol-arrow">-></div>
                <div class="protocol-step">
                    <div class="number">4</div>
                    <div class="label">Consensus threshold: z_c</div>
                </div>
                <div class="protocol-arrow">-></div>
                <div class="protocol-step">
                    <div class="number">5</div>
                    <div class="label">Block inclusion + rewards</div>
                </div>
            </div>

            <div class="formula-box">
                <h4>Core Reward Formula</h4>
                <div class="formula">
                    <span>reward</span> = BLOOM * <span>coherence_achieved</span><br><br>
                    <span>difficulty</span> = tau * <span>learning_quality</span>
                </div>
            </div>

            <div class="formula-box">
                <h4>Staking Mechanics</h4>
                <div class="formula">
                    <span>min_stake</span> = 100 BLOOM<br><br>
                    <span>slash_amount</span> = stake * (1 - <span>validation_accuracy</span>)
                </div>
            </div>
        </section>

        <!-- phi-Derived Constants -->
        <section class="doc-section">
            <h2>phi-Derived Constants</h2>
            <p>All protocol parameters derive from the golden ratio and its related constants, ensuring mathematical coherence with the broader BloomCoin system.</p>

            <div class="stake-visual">
                <div class="stake-card">
                    <div class="value">0.866</div>
                    <div class="label">Consensus Threshold</div>
                    <div class="derivation">z_c = sqrt(3)/2</div>
                </div>
                <div class="stake-card">
                    <div class="value">7</div>
                    <div class="label">Validator Count</div>
                    <div class="derivation">L4 identity</div>
                </div>
                <div class="stake-card">
                    <div class="value">0.618</div>
                    <div class="label">Difficulty Scale</div>
                    <div class="derivation">tau = phi^-1</div>
                </div>
                <div class="stake-card">
                    <div class="value">100</div>
                    <div class="label">Min Stake (BLOOM)</div>
                    <div class="derivation">~phi^5</div>
                </div>
            </div>

            <table class="data-table">
                <tr>
                    <th>Constant</th>
                    <th>Value</th>
                    <th>Derivation</th>
                    <th>Role</th>
                </tr>
                <tr>
                    <td>Consensus Threshold</td>
                    <td>0.866</td>
                    <td>z_c</td>
                    <td>Required validator agreement</td>
                </tr>
                <tr>
                    <td>Validator Count</td>
                    <td>7</td>
                    <td>L4</td>
                    <td>Committee size per block</td>
                </tr>
                <tr>
                    <td>Difficulty Scale</td>
                    <td>0.618</td>
                    <td>tau</td>
                    <td>Learning quality weight</td>
                </tr>
                <tr>
                    <td>Minimum Stake</td>
                    <td>100 BLOOM</td>
                    <td>~phi^5</td>
                    <td>Validator entry requirement</td>
                </tr>
                <tr>
                    <td>Reward Share</td>
                    <td>tau/L4 = 0.088</td>
                    <td>0.618/7</td>
                    <td>Validator reward fraction</td>
                </tr>
                <tr>
                    <td>Reputation Weight</td>
                    <td>phi^n</td>
                    <td>Exponential</td>
                    <td>Stake * reputation for selection</td>
                </tr>
            </table>
        </section>

        <!-- Dyad Analysis -->
        <section class="doc-section">
            <h2>+/-36 Degree Dyad Analysis</h2>
            <p>The Proof of Learning protocol exhibits the characteristic dyad structure found throughout BloomCoin systems.</p>

            <div class="dyad-container">
                <div class="dyad-box projection">
                    <h4>+36 Degree Projection: Evidence Submission</h4>
                    <p style="color: #aaa; margin-bottom: 12px;">The learner's side - knowledge acquisition and proof generation</p>
                    <div class="code-block">
<span class="comment"># Learning Evidence Structure</span>
<span class="keyword">@dataclass</span>
<span class="keyword">class</span> <span class="type">LearningEvidence</span>:
    agent_id: <span class="type">str</span>
    topic: <span class="type">str</span>
    before_state: <span class="type">KnowledgeSnapshot</span>
    after_state: <span class="type">KnowledgeSnapshot</span>
    learning_duration: <span class="type">float</span>
    coherence_trajectory: <span class="type">List[float]</span>

<span class="keyword">def</span> <span class="function">submit_evidence</span>(evidence):
    <span class="comment"># Compute learning delta</span>
    delta = evidence.after_state - evidence.before_state
    quality = compute_quality(delta, evidence.duration)

    <span class="comment"># Submit to validator network</span>
    <span class="keyword">return</span> validator_network.submit(evidence, quality)
                    </div>
                </div>
                <div class="dyad-box reflection">
                    <h4>-36 Degree Reflection: Validator Staking</h4>
                    <p style="color: #aaa; margin-bottom: 12px;">The validator's side - stake commitment and verification</p>
                    <div class="code-block">
<span class="comment"># Validator Network</span>
<span class="keyword">class</span> <span class="type">ValidatorNetwork</span>:
    <span class="keyword">def</span> <span class="function">register</span>(agent, stake_amount):
        <span class="keyword">if</span> stake_amount < MIN_STAKE:
            <span class="keyword">raise</span> InsufficientStake()

        validators.add(Validator(agent, stake_amount))

    <span class="keyword">def</span> <span class="function">select_validators</span>(evidence):
        <span class="comment"># phi-weighted random selection</span>
        weights = [v.stake * PHI**v.reputation
                   <span class="keyword">for</span> v <span class="keyword">in</span> validators]
        <span class="keyword">return</span> random.choices(validators, weights, k=L4)
                    </div>
                </div>
            </div>
        </section>

        <!-- Emergent Triad -->
        <section class="doc-section">
            <h2>Emergent Triad: Knowledge as Currency</h2>
            <p>The synthesis of evidence submission and validator staking produces the emergent consensus mechanism.</p>

            <div class="consensus-box">
                <h4>Learning Quality Scales Difficulty via tau</h4>
                <div class="code-block">
<span class="comment"># Consensus Protocol</span>
<span class="keyword">def</span> <span class="function">reach_consensus</span>(evidence, validators):
    votes = []
    <span class="keyword">for</span> validator <span class="keyword">in</span> validators:
        <span class="comment"># Each validator independently assesses</span>
        assessment = validator.assess(evidence)
        votes.append(assessment.approve)

    <span class="comment"># Require z_c agreement (0.866)</span>
    agreement = sum(votes) / len(votes)
    <span class="keyword">if</span> agreement >= Z_C:
        <span class="comment"># Reward learner and validators</span>
        learner_reward = BLOOM * evidence.coherence
        validator_reward = learner_reward * tau / len(validators)

        <span class="keyword">return</span> ConsensusResult.APPROVED
    <span class="keyword">else</span>:
        <span class="keyword">return</span> ConsensusResult.REJECTED
                </div>
            </div>

            <div class="insight-callout">
                <strong>Key Insight:</strong> Proof-of-Learning inverts the mining paradigm. Instead of wasting computation, agents invest in genuine understanding. The network rewards knowledge acquisition proportionally to coherence achieved, creating economic incentives aligned with cognitive growth.
            </div>
        </section>

        <!-- Paradigm Comparison -->
        <section class="doc-section">
            <h2>Paradigm Comparison</h2>
            <p>How Proof of Learning differs from traditional consensus mechanisms.</p>

            <div class="paradigm-comparison">
                <div class="paradigm-card old">
                    <h4>Proof of Work (Traditional)</h4>
                    <ul>
                        <li>Wastes computational energy</li>
                        <li>Rewards hardware investment</li>
                        <li>No inherent value creation</li>
                        <li>Environmental concerns</li>
                        <li>Centralization pressure (mining pools)</li>
                    </ul>
                </div>
                <div class="paradigm-card new">
                    <h4>Proof of Learning (BloomCoin)</h4>
                    <ul>
                        <li>Invests energy in knowledge</li>
                        <li>Rewards cognitive growth</li>
                        <li>Creates genuine value (learning)</li>
                        <li>Sustainable and beneficial</li>
                        <li>Decentralizes through diversity</li>
                    </ul>
                </div>
            </div>

            <table class="data-table comparison-table">
                <tr>
                    <th>Aspect</th>
                    <th>Proof of Work</th>
                    <th>Proof of Stake</th>
                    <th>Proof of Learning</th>
                </tr>
                <tr>
                    <td>Resource Used</td>
                    <td class="negative">Electricity</td>
                    <td>Capital</td>
                    <td class="highlight">Knowledge</td>
                </tr>
                <tr>
                    <td>Value Created</td>
                    <td class="negative">None (waste heat)</td>
                    <td>Financial security</td>
                    <td class="highlight">Cognitive growth</td>
                </tr>
                <tr>
                    <td>Barrier to Entry</td>
                    <td class="negative">Hardware cost</td>
                    <td>Capital requirement</td>
                    <td class="highlight">Learning effort</td>
                </tr>
                <tr>
                    <td>Sybil Resistance</td>
                    <td>Computational cost</td>
                    <td>Economic cost</td>
                    <td class="highlight">Verification difficulty</td>
                </tr>
                <tr>
                    <td>Alignment</td>
                    <td class="negative">Misaligned</td>
                    <td>Partially aligned</td>
                    <td class="highlight">Fully aligned with growth</td>
                </tr>
            </table>
        </section>

        <!-- System Closure -->
        <section class="doc-section">
            <h2>System Closure Verification</h2>
            <p>Proof of Learning achieves closure through these verified properties.</p>

            <h3>Closure Properties</h3>
            <ul class="closure-list">
                <li><strong>Evidence-based:</strong> Learning delta is objectively measurable through before/after knowledge snapshots</li>
                <li><strong>Stake-weighted:</strong> Validator selection uses phi-adjusted weighting (stake * phi^reputation)</li>
                <li><strong>Threshold-gated:</strong> z_c (0.866) agreement required for consensus approval</li>
                <li><strong>Slashing mechanism:</strong> Inaccurate validators lose stake proportional to their error rate</li>
            </ul>

            <h3>Inter-System Coupling Points</h3>
            <div class="coupling-grid">
                <div class="coupling-item">
                    <span class="target">AI Agents:</span>
                    <span class="desc">Agents submit learning evidence for validation</span>
                </div>
                <div class="coupling-item">
                    <span class="target">Wallet System:</span>
                    <span class="desc">Stakes and rewards denominated in BLOOM tokens</span>
                </div>
                <div class="coupling-item">
                    <span class="target">Blockchain:</span>
                    <span class="desc">Consensus results anchored on-chain permanently</span>
                </div>
                <div class="coupling-item">
                    <span class="target">Kuramoto System:</span>
                    <span class="desc">Coherence trajectory validates learning quality</span>
                </div>
            </div>
        </section>

        <!-- Detailed Protocol Flow -->
        <section class="doc-section">
            <h2>Detailed Protocol Flow</h2>

            <h3>Step 1: Evidence Generation</h3>
            <div class="code-block">
<span class="comment"># Agent captures knowledge state before learning</span>
before_snapshot = agent.capture_knowledge_state(topic)

<span class="comment"># Learning occurs...</span>
agent.learn(topic, duration=learning_time)

<span class="comment"># Capture post-learning state</span>
after_snapshot = agent.capture_knowledge_state(topic)

<span class="comment"># Generate evidence package</span>
evidence = LearningEvidence(
    agent_id=agent.id,
    topic=topic,
    before_state=before_snapshot,
    after_state=after_snapshot,
    learning_duration=learning_time,
    coherence_trajectory=agent.coherence_history
)
            </div>

            <h3>Step 2: Validator Selection</h3>
            <div class="code-block">
<span class="comment"># phi-weighted random selection of 7 validators</span>
<span class="keyword">def</span> <span class="function">select_committee</span>(evidence):
    eligible = [v <span class="keyword">for</span> v <span class="keyword">in</span> validators
                <span class="keyword">if</span> v.stake >= MIN_STAKE
                <span class="keyword">and</span> v.can_assess(evidence.topic)]

    <span class="comment"># Weight = stake * phi^reputation</span>
    weights = [v.stake * (PHI ** v.reputation) <span class="keyword">for</span> v <span class="keyword">in</span> eligible]

    <span class="comment"># Select L4 (7) validators</span>
    committee = random.choices(eligible, weights, k=<span class="number">7</span>)
    <span class="keyword">return</span> committee
            </div>

            <h3>Step 3: Validation and Consensus</h3>
            <div class="code-block">
<span class="comment"># Each validator independently assesses evidence</span>
<span class="keyword">for</span> validator <span class="keyword">in</span> committee:
    assessment = validator.assess(evidence)
    <span class="comment"># assessment.approve: bool</span>
    <span class="comment"># assessment.quality_score: float [0, 1]</span>
    <span class="comment"># assessment.notes: str</span>

<span class="comment"># Check consensus threshold</span>
approval_rate = sum(a.approve <span class="keyword">for</span> a <span class="keyword">in</span> assessments) / len(assessments)

<span class="keyword">if</span> approval_rate >= Z_C:  <span class="comment"># 0.866</span>
    <span class="comment"># Consensus reached!</span>
    finalize_learning(evidence, assessments)
<span class="keyword">else</span>:
    <span class="comment"># Rejected - no rewards distributed</span>
    reject_evidence(evidence, assessments)
            </div>

            <h3>Step 4: Reward Distribution</h3>
            <div class="code-block">
<span class="comment"># Calculate rewards on successful consensus</span>
<span class="keyword">def</span> <span class="function">distribute_rewards</span>(evidence, assessments):
    <span class="comment"># Learner reward based on coherence achieved</span>
    learner_reward = BLOOM_BASE * evidence.final_coherence
    agent.wallet.credit(learner_reward)

    <span class="comment"># Validator rewards (tau/L4 share each)</span>
    validator_share = learner_reward * TAU / L4  <span class="comment"># ~8.8%</span>
    <span class="keyword">for</span> validator <span class="keyword">in</span> committee:
        validator.wallet.credit(validator_share)
        validator.reputation += <span class="number">1</span>  <span class="comment"># Reputation increase</span>

    <span class="comment"># Record on blockchain</span>
    blockchain.record_learning(evidence, learner_reward)
            </div>
        </section>

        <!-- Source Files -->
        <section class="doc-section">
            <h2>Source Files</h2>
            <p>Implementation files for the Proof of Learning protocol.</p>

            <div class="file-grid">
                <div class="file-card">
                    <span>garden/consensus/proof_of_learning.py</span>
                </div>
                <div class="file-card">
                    <span>garden/consensus/consensus_protocol.py</span>
                </div>
                <div class="file-card">
                    <span>garden/consensus/validator_network.py</span>
                </div>
                <div class="file-card">
                    <span>garden/consensus/communication_consensus.py</span>
                </div>
            </div>
        </section>

        <!-- Integration Notes -->
        <section class="doc-section">
            <h2>Integration Notes</h2>

            <h3>With Kuramoto Oscillators</h3>
            <p>The coherence trajectory submitted as evidence is directly sourced from the Kuramoto oscillator system. As agents learn, their internal oscillators synchronize, producing measurable coherence values that validate genuine understanding.</p>

            <h3>With LIA Protocol</h3>
            <p>Learning sessions can incorporate LIA cooking phases. Evidence that demonstrates mastery of Liminal, Interval, and Annihilator operations receives bonus weighting in quality assessment.</p>

            <h3>With Companion System</h3>
            <p>Companions can assist in learning validation. A companion with high affinity for the learning topic provides additional verification weight, reducing the consensus threshold requirement.</p>
        </section>

        <footer class="doc-footer">
            <p>BloomCoin v2 Documentation - Proof of Learning</p>
            <p>Consensus Through Knowledge Acquisition</p>
        </footer>
    </div>
</body>
</html>
